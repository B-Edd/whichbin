<!DOCTYPE html>
<html>
<head>
    <title>Object Search</title>
    <style>
        /* Add some basic styling */
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        h1 {
            text-align: center;
        }

        .search-container {
            text-align: center;
            margin-bottom: 20px;
        }

        .search-input {
            padding: 10px;
            width: 300px;
        }

        .search-button {
            padding: 10px 20px;
        }
    </style>
</head>
<body>
    <h1>Object Search</h1>

    <div class="search-container">
        <input id="search-input" class="search-input" type="text" placeholder="Enter an object">
        <button id="search-button" class="search-button">Search</button>
    </div>

    <div id="result-container"></div>

    <script>
        localStorage.setItem('recycling.txt', 'Newspapers\magazines\Office paper\envelopes\Cardboard boxes\cardboard box\Cardboard\cereal box\cereal boxes\paper\Plastic bottles\water bottles\soda bottles\shampoo bottles\Plastic food containers\yogurt cups\butter tubs\butter tub\Plastic jars\plastic jar\peanut butter jars\peanut butter jar\sauce jars\sauce jar\Plastic lids\plastic lid\glass\glass bottle\bottle\Glass jars\metal\metal can\Aluminum cans\soda cans\canned food\Steel cans\soup cans\vegetable cans\Empty aerosol cans\carton\aerosol cans\Milk\milk carton\juice cartons\Soup\soup carton\broth cartons\Drink boxes\juice box\aluminum foil\aluminum\foil\foil container\Plastic bags\Plastic grocery bags\Bread bags\Dry cleaning bags\Plastic wrap\film\reusable watter bottle');
        localStorage.setItem('garbage.txt', 'Plastic wrappers\Packaging materials\Styrofoam containers\Cutlery\Straws\Bags\Used tissues\Paper towels\Disposable paper plates\Cups\greasy paper\Broken glassware\Mirrors\Window glass\Batteries\Paints\Solvents\Chemicals\Electronic waste\e-waste\e waste\Used diapers\Sanitary pads\Tampons');
        localStorage.setItem('green_bin.txt', 'Apple\Banana\Orange\Strawberry\Blueberry\Raspberry\Pineapple\Mango\Watermelon\Grapes\Lemon\Lime\Peach\Pear\Plum\Cherry\Kiwi\Coconut\Avocado\Papaya\Fig\Guava\Cranberry\Blackberry\Pomegranate\Apricot\Grapefruit\Passion fruit\Lychee\Cantaloupe\Honeydew melon\Nectarine\Tangerine\Clementine\Persimmon\Dragonfruit\Jackfruit\Kiwifruit\Olive\Date\grass clippings\grass\leaves\branches');
        function add_object(object_from_usr, bin_) {
            var bin_mapping = {
                'recycling': 'recycling.txt',
                'recycling bin': 'recycling.txt',
                'garbage': 'garbage.txt',
                'garbage bin': 'garbage.txt',
                'black bin': 'garbage.txt',
                'black': 'garbage.txt',
                'green': 'green_bin.txt',
                'green bin': 'green_bin.txt',
            };

            if (bin_ in bin_mapping) {
                var file_name = bin_mapping[bin_];
                var formData = new FormData();
                formData.append("object", object_from_usr);

                fetch('bins/' + file_name, {
                    method: 'POST',
                    body: formData
                })
                .then(function(response) {
                    if (response.ok) {
                        alert("Object added to bin successfully.");
                    } else {
                        alert("Failed to add object to bin.");
                    }
                })
                .catch(function(error) {
                    console.error("Error adding object:", error);
                });
            } else {
                alert("Invalid bin specified.");
            }
        }

        function search_bin(searched_object) {
            var split_object = searched_object.split(" ");

            if (split_object.includes("container")) {
                return "Recycling";
            }

            var recycling_search = new XMLHttpRequest();
            recycling_search.open("GET", 'bins/recycling.txt', false);
            recycling_search.send();

            if (recycling_search.responseText.toLowerCase().split('\n').includes(searched_object.toLowerCase())) {
                return "Recycling";
            }

            var garbage_search = new XMLHttpRequest();
            garbage_search.open("GET", 'bins/garbage.txt', false);
            garbage_search.send();

            if (garbage_search.responseText.toLowerCase().split('\n').includes(searched_object.toLowerCase())) {
                return "Garbage";
            }

            var green_bin_search = new XMLHttpRequest();
            green_bin_search.open("GET", 'bins/green_bin.txt', false);
            green_bin_search.send();

            if (green_bin_search.responseText.toLowerCase().split('\n').includes(searched_object.toLowerCase())) {
                return "Green Bin";
            }

            // ------now plural

            recycling_search.open("GET", 'bins/recycling.txt', false);
            recycling_search.send();

            if (recycling_search.responseText.toLowerCase().split('\n').includes(searched_object.toLowerCase() + "s")) {
                return "Recycling";
            }

            garbage_search.open("GET", 'bins/garbage.txt', false);
            garbage_search.send();

            if (garbage_search.responseText.toLowerCase().split('\n').includes(searched_object.toLowerCase() + "s")) {
                return "Garbage";
            }

            green_bin_search.open("GET", 'bins/green_bin.txt', false);
            green_bin_search.send();

            if (green_bin_search.responseText.toLowerCase().split('\n').includes(searched_object.toLowerCase() + "s")) {
                return "Green Bin";
            }

            return "Not in the list.";
        }

        function displayResult(result) {
            var resultContainer = document.getElementById("result-container");
            resultContainer.innerHTML = "<p>" + result + "</p>";
        }

        function handleSearch() {
            var searchInput = document.getElementById("search-input");
            var searchTerm = searchInput.value;

            var found = search_bin(searchTerm);
            displayResult(found);

            if (found === "Not in the list.") {
                var addNewObject = confirm("That object is not in the list. Would you like to add it?");

                if (addNewObject) {
                    var whichBin = prompt("Which bin does it go in?");
                    add_object(searchTerm, whichBin);
                }
            }
        }

        var searchButton = document.getElementById("search-button");
        searchButton.addEventListener("click", handleSearch);
    </script>
</body>
</html>
